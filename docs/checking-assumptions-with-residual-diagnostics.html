<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Encyclopedia of Quantitative Methods in R, vol. 5: Multilevel Models</title>
  <meta name="description" content="RM Regression: ICCs, MLM/HLM, and GEEs.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Encyclopedia of Quantitative Methods in R, vol. 5: Multilevel Models" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="EQM_v1_cover.png" />
  <meta property="og:description" content="RM Regression: ICCs, MLM/HLM, and GEEs." />
  <meta name="github-repo" content="cehs-research/eBook_wrangle" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Encyclopedia of Quantitative Methods in R, vol. 5: Multilevel Models" />
  
  <meta name="twitter:description" content="RM Regression: ICCs, MLM/HLM, and GEEs." />
  <meta name="twitter:image" content="EQM_v1_cover.png" />

<meta name="author" content="Sarah Schwartz &amp; Tyson Barrett">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="variance-explained.html">
<link rel="next" href="references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="heading.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Vol. 5: Multilevel Models</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#blocked-notes"><i class="fa fa-check"></i>Blocked Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code-and-output"><i class="fa fa-check"></i>Code and Output</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-authors"><i class="fa fa-check"></i>The Authors</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-choose-r"><i class="fa fa-check"></i>Why choose R ?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#fyi"><i class="fa fa-check"></i>FYI</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="formula-warehouse.html"><a href="formula-warehouse.html"><i class="fa fa-check"></i><b>1</b> Formula Warehouse</a><ul>
<li class="chapter" data-level="1.1" data-path="formula-warehouse.html"><a href="formula-warehouse.html#data-notation"><i class="fa fa-check"></i><b>1.1</b> Data Notation</a></li>
<li class="chapter" data-level="1.2" data-path="formula-warehouse.html"><a href="formula-warehouse.html#single-level-regression-analysis"><i class="fa fa-check"></i><b>1.2</b> Single-level Regression Analysis</a><ul>
<li class="chapter" data-level="1.2.1" data-path="formula-warehouse.html"><a href="formula-warehouse.html#the-only-equation"><i class="fa fa-check"></i><b>1.2.1</b> The Only Equation</a></li>
<li class="chapter" data-level="1.2.2" data-path="formula-warehouse.html"><a href="formula-warehouse.html#parameters"><i class="fa fa-check"></i><b>1.2.2</b> Parameters</a></li>
<li class="chapter" data-level="1.2.3" data-path="formula-warehouse.html"><a href="formula-warehouse.html#assumptions-to-check"><i class="fa fa-check"></i><b>1.2.3</b> Assumptions to Check</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="formula-warehouse.html"><a href="formula-warehouse.html#multi-level-regression-analysis"><i class="fa fa-check"></i><b>1.3</b> Multi-level Regression Analysis</a><ul>
<li class="chapter" data-level="1.3.1" data-path="formula-warehouse.html"><a href="formula-warehouse.html#level-1-regression-equation"><i class="fa fa-check"></i><b>1.3.1</b> Level 1 Regression Equation*</a></li>
<li class="chapter" data-level="1.3.2" data-path="formula-warehouse.html"><a href="formula-warehouse.html#level-2-regression-equations"><i class="fa fa-check"></i><b>1.3.2</b> Level 2 Regression Equations</a></li>
<li class="chapter" data-level="1.3.3" data-path="formula-warehouse.html"><a href="formula-warehouse.html#combinded-multilevel-regression-equation"><i class="fa fa-check"></i><b>1.3.3</b> Combinded, Multilevel Regression Equation</a></li>
<li class="chapter" data-level="1.3.4" data-path="formula-warehouse.html"><a href="formula-warehouse.html#parameters-1"><i class="fa fa-check"></i><b>1.3.4</b> Parameters</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="formula-warehouse.html"><a href="formula-warehouse.html#intraclass-correlation-icc"><i class="fa fa-check"></i><b>1.4</b> Intraclass Correlation (ICC)</a><ul>
<li class="chapter" data-level="1.4.1" data-path="formula-warehouse.html"><a href="formula-warehouse.html#two-level-models"><i class="fa fa-check"></i><b>1.4.1</b> Two Level Models</a></li>
<li class="chapter" data-level="1.4.2" data-path="formula-warehouse.html"><a href="formula-warehouse.html#three-level-models"><i class="fa fa-check"></i><b>1.4.2</b> Three Level Models</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="formula-warehouse.html"><a href="formula-warehouse.html#proporion-of-variance-explianed"><i class="fa fa-check"></i><b>1.5</b> Proporion of Variance Explianed</a><ul>
<li class="chapter" data-level="1.5.1" data-path="formula-warehouse.html"><a href="formula-warehouse.html#level-1-variance-explained"><i class="fa fa-check"></i><b>1.5.1</b> Level 1 Variance Explained</a></li>
<li class="chapter" data-level="1.5.2" data-path="formula-warehouse.html"><a href="formula-warehouse.html#level-2-variance-explined"><i class="fa fa-check"></i><b>1.5.2</b> Level 2 Variance Explined</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="formula-warehouse.html"><a href="formula-warehouse.html#using-latex-for-equation-typesetting"><i class="fa fa-check"></i><b>1.6</b> Using <span class="math inline">\(\LaTeX\)</span> for Equation Typesetting</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html"><i class="fa fa-check"></i><b>2</b> Intro 2-level Model Example: Pupil Popularity</a><ul>
<li class="chapter" data-level="2.1" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#background"><i class="fa fa-check"></i><b>2.1</b> Background</a><ul>
<li class="chapter" data-level="2.1.1" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#unique-identifiers"><i class="fa fa-check"></i><b>2.1.1</b> Unique Identifiers</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#structure-and-variables"><i class="fa fa-check"></i><b>2.1.2</b> Structure and variables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>2.2</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#summarize-descriptive-statistics"><i class="fa fa-check"></i><b>2.2.1</b> Summarize Descriptive Statistics</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#visualizations-of-raw-data"><i class="fa fa-check"></i><b>2.2.2</b> Visualizations of Raw Data</a></li>
<li class="chapter" data-level="2.2.3" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#consider-clustering"><i class="fa fa-check"></i><b>2.2.3</b> Consider Clustering</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#single-level-regression-analysis-1"><i class="fa fa-check"></i><b>2.3</b> Single-level Regression Analysis</a><ul>
<li class="chapter" data-level="2.3.1" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#null-model"><i class="fa fa-check"></i><b>2.3.1</b> Null Model</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#add-predictors-to-the-model"><i class="fa fa-check"></i><b>2.3.2</b> Add Predictors to the Model</a></li>
<li class="chapter" data-level="2.3.3" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#compare-fixed-effects"><i class="fa fa-check"></i><b>2.3.3</b> Compare Fixed Effects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#multi-level-regression-analysis-1"><i class="fa fa-check"></i><b>2.4</b> Multi-level Regression Analysis</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#intercept-only-or-null-model"><i class="fa fa-check"></i><b>2.4.1</b> Intercept-only or Null Model</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#intraclass-correlation-icc-1"><i class="fa fa-check"></i><b>2.4.2</b> Intraclass Correlation (ICC)</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#add-predictors-to-the-model-1"><i class="fa fa-check"></i><b>2.4.3</b> Add Predictors to the Model</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#testing-random-components"><i class="fa fa-check"></i><b>2.4.4</b> Testing Random Components</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#testing-cross-level-interactions"><i class="fa fa-check"></i><b>2.4.5</b> Testing Cross-Level Interactions</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro-2-level-model-example-pupil-popularity.html"><a href="intro-2-level-model-example-pupil-popularity.html#final-model"><i class="fa fa-check"></i><b>2.4.6</b> Final Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html"><i class="fa fa-check"></i><b>3</b> Intro 3-Level Model Example: Nurse’s Stress Intervention</a><ul>
<li class="chapter" data-level="3.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#background-1"><i class="fa fa-check"></i><b>3.1</b> Background</a><ul>
<li class="chapter" data-level="3.1.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#unique-identifiers-1"><i class="fa fa-check"></i><b>3.1.1</b> Unique Identifiers</a></li>
<li class="chapter" data-level="3.1.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#centering-variables"><i class="fa fa-check"></i><b>3.1.2</b> Centering Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#exploratory-data-analysis-1"><i class="fa fa-check"></i><b>3.2</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.2.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#summarize-descriptive-statistics-1"><i class="fa fa-check"></i><b>3.2.1</b> Summarize Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#mlm-null-model"><i class="fa fa-check"></i><b>3.3</b> MLM: Null Model</a></li>
<li class="chapter" data-level="3.4" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#estimate-the-icc"><i class="fa fa-check"></i><b>3.4</b> Estimate the ICC</a></li>
<li class="chapter" data-level="3.5" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#mlm-add-fixed-effects"><i class="fa fa-check"></i><b>3.5</b> MLM: Add Fixed Effects</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#fit-the-model-5"><i class="fa fa-check"></i><b>3.5.1</b> Fit the Model</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#assess-significance"><i class="fa fa-check"></i><b>3.5.2</b> Assess Significance</a></li>
<li class="chapter" data-level="3.5.3" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#centering-variables-1"><i class="fa fa-check"></i><b>3.5.3</b> Centering Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#mlm-add-random-slope"><i class="fa fa-check"></i><b>3.6</b> MLM: Add Random Slope</a><ul>
<li class="chapter" data-level="3.6.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#fit-the-model-6"><i class="fa fa-check"></i><b>3.6.1</b> Fit the Model</a></li>
<li class="chapter" data-level="3.6.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#assess-significance-1"><i class="fa fa-check"></i><b>3.6.2</b> Assess Significance</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#mlm-add-cross-level-interaction"><i class="fa fa-check"></i><b>3.7</b> MLM: Add Cross-Level Interaction</a><ul>
<li class="chapter" data-level="3.7.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#fit-the-model-7"><i class="fa fa-check"></i><b>3.7.1</b> Fit the Model</a></li>
<li class="chapter" data-level="3.7.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#assess-significance-2"><i class="fa fa-check"></i><b>3.7.2</b> Assess Significance</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#final-model-1"><i class="fa fa-check"></i><b>3.8</b> Final Model</a><ul>
<li class="chapter" data-level="3.8.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#fit-the-model-8"><i class="fa fa-check"></i><b>3.8.1</b> Fit the model</a></li>
<li class="chapter" data-level="3.8.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#table-of-estimated-parameters"><i class="fa fa-check"></i><b>3.8.2</b> Table of Estimated Parameters</a></li>
<li class="chapter" data-level="3.8.3" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#visualization-estimated-marginal-means-plot"><i class="fa fa-check"></i><b>3.8.3</b> Visualization: Estimated Marginal Means Plot</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#interpretation-6"><i class="fa fa-check"></i><b>3.9</b> Interpretation</a><ul>
<li class="chapter" data-level="3.9.1" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#strength"><i class="fa fa-check"></i><b>3.9.1</b> Strength</a></li>
<li class="chapter" data-level="3.9.2" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#weakness"><i class="fa fa-check"></i><b>3.9.2</b> Weakness</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="intro-3-level-model-example-nurses-stress-intervention.html"><a href="intro-3-level-model-example-nurses-stress-intervention.html#reproduction-of-table-2.5"><i class="fa fa-check"></i><b>3.10</b> Reproduction of Table 2.5</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><i class="fa fa-check"></i><b>4</b> Intro Centering and Scaling Example: Reading Achievement (2-levels only)</a><ul>
<li class="chapter" data-level="4.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#background-2"><i class="fa fa-check"></i><b>4.1</b> Background</a><ul>
<li class="chapter" data-level="4.1.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#sample-structure"><i class="fa fa-check"></i><b>4.1.1</b> Sample Structure</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#exploratory-data-analysis-2"><i class="fa fa-check"></i><b>4.2</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="4.2.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#summarize-descriptive-statistics-2"><i class="fa fa-check"></i><b>4.2.1</b> Summarize Descriptive Statistics</a></li>
<li class="chapter" data-level="4.2.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#visualization-of-raw-data"><i class="fa fa-check"></i><b>4.2.2</b> Visualization of Raw Data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#single-level-regression"><i class="fa fa-check"></i><b>4.3</b> Single-Level Regression</a><ul>
<li class="chapter" data-level="4.3.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#fit-nested-models-2"><i class="fa fa-check"></i><b>4.3.1</b> Fit Nested Models</a></li>
<li class="chapter" data-level="4.3.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#visualize-the-interaction"><i class="fa fa-check"></i><b>4.3.2</b> Visualize the Interaction</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#mlm---step-1-null-model-only-fixed-and-random-intercepts"><i class="fa fa-check"></i><b>4.4</b> MLM - Step 1: Null Model, only fixed and random intercepts</a><ul>
<li class="chapter" data-level="4.4.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#fit-the-model-9"><i class="fa fa-check"></i><b>4.4.1</b> Fit the Model</a></li>
<li class="chapter" data-level="4.4.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#estimate-the-icc-1"><i class="fa fa-check"></i><b>4.4.2</b> Estimate the ICC</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#mlm---step-2-add-lower-level-explanatory-variables-fixed-ml"><i class="fa fa-check"></i><b>4.5</b> MLM - Step 2: Add Lower-level explanatory variables, fixed, ML</a><ul>
<li class="chapter" data-level="4.5.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#add-pupils-vocab-score-as-a-fixed-effects-predictor"><i class="fa fa-check"></i><b>4.5.1</b> Add pupil’s vocab score as a fixed effects predictor</a></li>
<li class="chapter" data-level="4.5.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#investigate-more-level-1-predictors"><i class="fa fa-check"></i><b>4.5.2</b> Investigate More Level 1 Predictors</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#mlm---step-3-higher-level-explanatory-variables-fixed-ml"><i class="fa fa-check"></i><b>4.6</b> MLM - Step 3: Higher-level explanatory variables, fixed, ML</a><ul>
<li class="chapter" data-level="4.6.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#assess-significance-of-effects-2"><i class="fa fa-check"></i><b>4.6.1</b> Assess Significance of Effects</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#mlm---step-4-explanatory-variables-predict-slopes-random-reml"><i class="fa fa-check"></i><b>4.7</b> MLM - Step 4: Explanatory variables predict Slopes, random, REML</a></li>
<li class="chapter" data-level="4.8" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#mlm---step-5-cross-level-interactions-between-explanatory-variables---fixed-ml"><i class="fa fa-check"></i><b>4.8</b> MLM - Step 5: Cross-Level interactions between explanatory variables - fixed, ML</a></li>
<li class="chapter" data-level="4.9" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#centering-predictors-change-center"><i class="fa fa-check"></i><b>4.9</b> Centering Predictors: Change Center</a><ul>
<li class="chapter" data-level="4.9.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#compute-the-grand-means"><i class="fa fa-check"></i><b>4.9.1</b> Compute the Grand Means</a></li>
<li class="chapter" data-level="4.9.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#use-centered-variables"><i class="fa fa-check"></i><b>4.9.2</b> Use Centered Variables</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#rescaling-predictors-change-units-or-standardize"><i class="fa fa-check"></i><b>4.10</b> Rescaling Predictors: Change Units or Standardize</a><ul>
<li class="chapter" data-level="4.10.1" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#scale-varaibles"><i class="fa fa-check"></i><b>4.10.1</b> Scale Varaibles</a></li>
<li class="chapter" data-level="4.10.2" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#use-scaled-variables"><i class="fa fa-check"></i><b>4.10.2</b> Use Scaled Variables</a></li>
<li class="chapter" data-level="4.10.3" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#final-model-2"><i class="fa fa-check"></i><b>4.10.3</b> Final Model</a></li>
<li class="chapter" data-level="4.10.4" data-path="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html"><a href="intro-centering-and-scaling-example-reading-achievement-2-levels-only.html#table"><i class="fa fa-check"></i><b>4.10.4</b> Table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="variance-explained.html"><a href="variance-explained.html"><i class="fa fa-check"></i><b>5</b> Variance Explained</a><ul>
<li class="chapter" data-level="5.1" data-path="variance-explained.html"><a href="variance-explained.html#for-generalized-mlms"><i class="fa fa-check"></i><b>5.1</b> For Generalized MLMs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html"><i class="fa fa-check"></i><b>6</b> Checking Assumptions with Residual Diagnostics</a><ul>
<li class="chapter" data-level="6.1" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#plotting-coefficients"><i class="fa fa-check"></i><b>6.1</b> Plotting Coefficients</a><ul>
<li class="chapter" data-level="6.1.1" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#fixed-effects"><i class="fa fa-check"></i><b>6.1.1</b> Fixed Effects</a></li>
<li class="chapter" data-level="6.1.2" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#random-effects"><i class="fa fa-check"></i><b>6.1.2</b> Random Effects</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#plotting-marginal-effects"><i class="fa fa-check"></i><b>6.2</b> Plotting Marginal Effects</a><ul>
<li class="chapter" data-level="6.2.1" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#predicted-values"><i class="fa fa-check"></i><b>6.2.1</b> Predicted Values</a></li>
<li class="chapter" data-level="6.2.2" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#effect-plots"><i class="fa fa-check"></i><b>6.2.2</b> Effect Plots</a></li>
<li class="chapter" data-level="6.2.3" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#interaction-plots"><i class="fa fa-check"></i><b>6.2.3</b> Interaction Plots</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#model-diagnostics"><i class="fa fa-check"></i><b>6.3</b> Model Diagnostics</a><ul>
<li class="chapter" data-level="6.3.1" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#slope-of-coefficentes"><i class="fa fa-check"></i><b>6.3.1</b> Slope of Coefficentes</a></li>
<li class="chapter" data-level="6.3.2" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#residuals"><i class="fa fa-check"></i><b>6.3.2</b> Residuals</a></li>
<li class="chapter" data-level="6.3.3" data-path="checking-assumptions-with-residual-diagnostics.html"><a href="checking-assumptions-with-residual-diagnostics.html#diagnostics"><i class="fa fa-check"></i><b>6.3.3</b> Diagnostics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Encyclopedia of Quantitative Methods in R, vol. 5: Multilevel Models</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="checking-assumptions-with-residual-diagnostics" class="section level1">
<h1><span class="header-section-number">6</span> Checking Assumptions with Residual Diagnostics</h1>
<div class="figure">
<img src="images/header_sjPlot.png" />

</div>
<div class="rmdlink">
<p>
<a href="http://www.danielluedecke.de/">Daniel Lüdecke</a> is German researcher that has put together several GREAT packages, including <code>sjPlot</code> which we will detail here. Documentation can be found at: <a href="http://www.strengejacke.de/sjPlot/index.html" class="uri">http://www.strengejacke.de/sjPlot/index.html</a>
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(haven)        <span class="co"># read in SPSS dataset</span>
<span class="kw">library</span>(furniture)    <span class="co"># nice table1() descriptives</span>
<span class="kw">library</span>(stargazer)    <span class="co"># display nice tables: summary &amp; regression</span>
<span class="kw">library</span>(texreg)       <span class="co"># Convert Regression Output to LaTeX or HTML Tables</span>
<span class="kw">library</span>(psych)        <span class="co"># contains some useful functions, like headTail</span>
<span class="kw">library</span>(lme4)         <span class="co"># Linear, generalized linear, &amp; nonlinear mixed models</span>
<span class="kw">library</span>(sjstats)      <span class="co"># ICC calculations</span>
<span class="kw">library</span>(effects)      <span class="co"># Effects for regression models</span>
<span class="kw">library</span>(optimx)       <span class="co"># Different optimizers to solve mlm&#39;s</span></code></pre></div>
<p>Read the SPSS data in with the <code>haven</code> package and prepare it (see previous chapter).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_raw &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">read_sav</span>(<span class="st">&quot;http://www.mlminr.com/data-sets/Achieve.sav?attredirects=0&quot;</span>)

data_achieve_center_scale &lt;-<span class="st"> </span>data_raw <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(id, region, corp, school, class), factor) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">gender =</span> gender <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                  </span><span class="kw">factor</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">classize =</span> classize <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                  </span><span class="kw">factor</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;12-17&quot;</span>, <span class="st">&quot;18-21&quot;</span>, 
                                    <span class="st">&quot;22-26&quot;</span>, <span class="st">&quot;&gt;26&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(id, region, corp, school, class,           <span class="co"># Identifiers</span>
                gender, age, geread, gevocab,              <span class="co"># Pupil-level vars</span>
                classize,                                  <span class="co"># Class-Level vars</span>
                senroll, ses) <span class="op">%&gt;%</span><span class="st">                          </span><span class="co"># School-level vars</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">gevocab_c =</span> gevocab <span class="op">-</span><span class="st"> </span><span class="fl">4.4938</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">age_c     =</span> age     <span class="op">-</span><span class="st"> </span><span class="fl">107.5290</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">senroll_c =</span> senroll <span class="op">-</span><span class="st"> </span><span class="fl">533.4148</span>) <span class="op">%&gt;%</span><span class="st">  </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">senroll_ch =</span> senroll_c <span class="op">/</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st">        </span><span class="co"># centered AND divided by one hundred</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">ses_t      =</span> ses <span class="op">/</span><span class="st"> </span><span class="dv">10</span>)                   <span class="co"># JUST divide by ten</span></code></pre></div>
<p>Fit the final model (see previous chapter)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fit_read_11re_s &lt;-<span class="st"> </span>lme4<span class="op">::</span><span class="kw">lmer</span>(geread <span class="op">~</span><span class="st"> </span>gevocab_c<span class="op">*</span>age_c <span class="op">+</span><span class="st"> </span>gevocab_c<span class="op">*</span>ses_t <span class="op">+</span><span class="st">   </span><span class="co"># 2 2-way interactions</span>
<span class="st">                                      </span>(gevocab_c <span class="op">|</span><span class="st"> </span>school),  
                             <span class="dt">data   =</span> data_achieve_center_scale,
                             <span class="dt">REML   =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Knit to Website: texreg::htmlreg()</span>
<span class="co"># Knit to PDF:     texreg::texreg()</span>
<span class="co"># View on Screen:  texreg::screenreg()</span>

texreg<span class="op">::</span><span class="kw">htmlreg</span>(<span class="kw">list</span>(fit_read_11re_s),
                <span class="dt">custom.model.names =</span> <span class="kw">c</span>(<span class="st">&quot;Final&quot;</span>), 
                <span class="dt">caption            =</span> <span class="st">&quot;MLM: Final Model&quot;</span>,
                <span class="dt">caption.above      =</span> <span class="ot">TRUE</span>,
                <span class="dt">single.row         =</span> <span class="ot">TRUE</span>)</code></pre></div>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<table cellspacing="0" align="center" style="border: none;">
<caption align="top" style="margin-bottom:0.3em;">
MLM: Final Model
</caption>
<tr>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b></b>
</th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;">
<b>Final</b>
</th>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
(Intercept)
</td>
<td style="padding-right: 12px; border: none;">
3.94 (0.11)<sup style="vertical-align: 0px;">***</sup>
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
gevocab_c
</td>
<td style="padding-right: 12px; border: none;">
0.67 (0.05)<sup style="vertical-align: 0px;">***</sup>
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
age_c
</td>
<td style="padding-right: 12px; border: none;">
-0.00 (0.00)
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
ses_t
</td>
<td style="padding-right: 12px; border: none;">
0.06 (0.01)<sup style="vertical-align: 0px;">***</sup>
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
gevocab_c:age_c
</td>
<td style="padding-right: 12px; border: none;">
0.01 (0.00)<sup style="vertical-align: 0px;">**</sup>
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
gevocab_c:ses_t
</td>
<td style="padding-right: 12px; border: none;">
-0.02 (0.01)<sup style="vertical-align: 0px;">**</sup>
</td>
</tr>
<tr>
<td style="border-top: 1px solid black;">
AIC
</td>
<td style="border-top: 1px solid black;">
42976.51
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
BIC
</td>
<td style="padding-right: 12px; border: none;">
43048.93
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Log Likelihood
</td>
<td style="padding-right: 12px; border: none;">
-21478.26
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Num. obs.
</td>
<td style="padding-right: 12px; border: none;">
10320
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Num. groups: school
</td>
<td style="padding-right: 12px; border: none;">
160
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Var: school (Intercept)
</td>
<td style="padding-right: 12px; border: none;">
0.08
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Var: school gevocab_c
</td>
<td style="padding-right: 12px; border: none;">
0.02
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">
Cov: school (Intercept) gevocab_c
</td>
<td style="padding-right: 12px; border: none;">
0.03
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid black;">
Var: Residual
</td>
<td style="border-bottom: 2px solid black;">
3.66
</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;" colspan="3">
<span style="font-size:0.8em"><sup style="vertical-align: 0px;"><em><strong></sup>p &lt; 0.001, <sup style="vertical-align: 0px;"></strong></sup>p &lt; 0.01, <sup style="vertical-align: 0px;"></em></sup>p &lt; 0.05</span>
</td>
</tr>
</table>
<p>Now we will show some of the things the <code>sjPlot</code> package can do!</p>
<div id="plotting-coefficients" class="section level2">
<h2><span class="header-section-number">6.1</span> Plotting Coefficients</h2>
<p>Select <code>terms</code> that should be plotted. All other term are removed from the output.</p>
<p>Note that the term names must match the names of the model’s coefficients. For factors, this means that the variable name is suffixed with the related factor level, and each category counts as one term. E.g. <code>rm.terms = &quot;t_name [2,3]&quot;</code> would remove the terms <code>t_name2</code> and <code>t_name3</code> (assuming that the variable t_name is categorical and has at least the factor levels 2 and 3).</p>
<p>Another example for the iris-dataset: <code>terms = &quot;Species&quot;</code> would not work, instead you would write <code>terms = &quot;Species [versicolor, virginica]&quot;</code> to remove these two levels, or <code>terms = &quot;Speciesversicolor&quot;</code> if you just want to remove the level versicolor from the plot.</p>
<div id="fixed-effects" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Fixed Effects</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;est&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-245-1.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;est&quot;</span>,
                   <span class="dt">show.values =</span> <span class="ot">TRUE</span>)  <span class="co"># Logical, whether values should be plotted or not.</span></code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-246-1.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;std&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-247-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Determines in which way estimates are sorted in the plot with the option: <code>sort.est =</code></p>
<ul>
<li>If <code>NULL</code> (default), no sorting is done and estimates are sorted in the same order as they appear in the model formula.<br />
</li>
<li>If <code>TRUE</code>, estimates are sorted in descending order, with highest estimate at the top.<br />
</li>
<li>If <code>sort.est = &quot;sort.all&quot;</code>, estimates are re-sorted for each coefficient (only applies if <code>type = &quot;re&quot;</code> and <code>grid = FALSE</code>), i.e. the estimates of the random effects for each predictor are sorted and plotted to an own plot.<br />
</li>
<li>If <code>type = &quot;re&quot;</code>, specify a predictor’s / coefficient’s name to sort estimates according to this random effect.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;std&quot;</span>,
                   <span class="dt">sort.est =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-248-1.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;std&quot;</span>,
                   <span class="dt">sort.est =</span> <span class="ot">TRUE</span>,
                   <span class="dt">show.values =</span> <span class="ot">TRUE</span>)  <span class="co"># Logical, whether values should be plotted or not.</span></code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-249-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Plots standardized beta values, however, standardization follows <span class="citation">Gelman (<a href="references.html#ref-gelman2008">2008</a>)</span> suggestion, rescaling the estimates by dividing them by two standard deviations instead of just one. Resulting coefficients are then directly comparable for untransformed <strong>binary predictors</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;std2&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-250-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="random-effects" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Random Effects</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;re&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-251-1.png" width="288" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;re&quot;</span>,
                   <span class="dt">grid =</span> <span class="ot">FALSE</span>,
                   <span class="dt">sort.est =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[[1]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-252-1.png" width="288" style="display: block; margin: auto;" /></p>
<pre><code>
[[2]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-252-2.png" width="288" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="plotting-marginal-effects" class="section level2">
<h2><span class="header-section-number">6.2</span> Plotting Marginal Effects</h2>
<p>Here <code>terms</code> indicates for which terms marginal effects should be displayed. At least one term is required to calculate effects, maximum length is three terms, where the second and third term indicate the groups, i.e. predictions of first term are grouped by the levels of the second (and third) term.</p>
<p><code>terms</code> may also indicate higher order terms (e.g. interaction terms).</p>
<p>Indicating levels in square brackets allows for selecting only specific groups. Term name and levels in brackets must be separated by a whitespace character, e.g. <code>terms = c(&quot;age&quot;, &quot;education [1,3]&quot;)</code>.</p>
<p>It is also possible to specify a range of numeric values for the predictions with a colon, for instance <code>terms = c(&quot;education [1,3]&quot;, &quot;age [30:50]&quot;)</code>.</p>
<p>Furthermore, it is possible to specify a function name. Values for predictions will then be transformed, e.g. <code>terms = &quot;income [exp]&quot;</code>. This is useful when model predictors were transformed for fitting the model and should be <strong>back-transformed</strong> to the original scale for predictions.</p>
<p>Finally, using pretty for numeric variables (e.g. <code>terms = &quot;age [pretty]&quot;</code>) calculates a pretty range of values for the term, roughly of proportional length to the term’s value range. For more details, see the documentation for the <code>ggpredict</code> package.</p>
<div id="predicted-values" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Predicted Values</h3>
<p>Based on (i.e. is a wrapper for): <code>ggeffects::ggpredict()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;pred&quot;</span>,
                   <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;gevocab_c&quot;</span>, <span class="st">&quot;ses_t&quot;</span>, <span class="st">&quot;age_c&quot;</span>))</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-253-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>The <code>pred.type =</code> option only applies for Marginal Effects plots with <strong>mixed effects models</strong>. Indicates whether predicted values should be <strong>conditioned on random effects</strong> (<code>pred.type = &quot;re&quot;</code>) or fixed effects only (<code>pred.type = &quot;fe&quot;</code>, the default). For details, see documentation of the type-argument in <code>ggpredict()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;pred&quot;</span>,
                   <span class="dt">pred.type =</span> <span class="st">&quot;re&quot;</span>,
                   <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;gevocab_c&quot;</span>, <span class="st">&quot;ses_t&quot;</span>, <span class="st">&quot;age_c&quot;</span>))</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-254-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="effect-plots" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Effect Plots</h3>
<p>Based on (i.e. is a wrapper for): <code>ggeffects::ggeffect()</code></p>
<p>Similar to <code>type = &quot;pred&quot;</code>, however, discrete predictors are held constant at their proportions (not reference level). See the <code>ggeffect</code> package documentation for details.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;eff&quot;</span>,
                   <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;gevocab_c&quot;</span>, <span class="st">&quot;ses_t&quot;</span>, <span class="st">&quot;age_c&quot;</span>))</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-255-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="interaction-plots" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Interaction Plots</h3>
<p>A shortcut for marginal effects plots, where <em>interaction terms are automatically detected</em> and used as terms-argument.</p>
<p>Furthermore, if the moderator variable (the second - and third - term in an interaction) is continuous, <code>type = &quot;int&quot;</code> automatically chooses useful values based on the mdrt.values-argument, which are passed to terms. Then, <code>ggpredict</code> is called.</p>
<p><code>type = &quot;int&quot;</code> plots the interaction term that appears:</p>
<ul>
<li><strong>first</strong> in the formula along the x-axis, while the</li>
<li><strong>second</strong> (and possibly third) variable in an interaction is used as grouping factor(s) (moderating variable).</li>
</ul>
<p>Use <code>type = &quot;pred&quot;</code> or <code>type = &quot;eff&quot;</code> and specify a certain order in the terms-argument to indicate which variable(s) should be used as moderator.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;int&quot;</span>)</code></pre></div>
<pre><code>[[1]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-256-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre><code>
[[2]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-256-2.png" width="576" style="display: block; margin: auto;" /></p>
<p>The <code>mdrt.values =</code> option indicates which values of the <strong>moderator variable</strong> should be used when plotting interaction terms (i.e. <code>type = &quot;int&quot;</code>).</p>
<ul>
<li><p><code>minmax</code> (default) minimum and maximum values (lower and upper bounds) of the moderator are used to plot the interaction between independent variable and moderator(s).</p></li>
<li><p><code>meansd</code> uses the mean value of the moderator as well as one standard deviation below and above mean value to plot the effect of the moderator on the independent variable (following the convention suggested by Cohen and Cohen and popularized by Aiken and West (1991), i.e. using the mean, the value one standard deviation above, and the value one standard deviation below the mean as values of the moderator, see Grace-Martin K: 3 Tips to Make Interpreting Moderation Effects Easier).</p></li>
<li><p><code>zeromax</code> is similar to the <code>minmax</code> option, however, <span class="math inline">\(0\)</span> is always used as minimum value for the moderator. This may be useful for predictors that don’t have an empirical zero-value, but absence of moderation should be simulated by using <span class="math inline">\(0\)</span> as minimum.</p></li>
<li><p><code>quart</code> calculates and uses the quartiles (lower, median and upper) of the moderator value.</p></li>
<li><p><code>all</code> uses all values of the moderator variable.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;int&quot;</span>,
                   <span class="dt">mdrt.values =</span> <span class="st">&quot;meansd&quot;</span>)</code></pre></div>
<pre><code>[[1]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-257-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre><code>
[[2]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-257-2.png" width="576" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="model-diagnostics" class="section level2">
<h2><span class="header-section-number">6.3</span> Model Diagnostics</h2>
<p>Note: For mixed models, the diagnostic plots like linear relationship or check for Homoscedasticity, do not take the uncertainty of random effects into account, but is only based on the fixed effects part of the model.</p>
<div id="slope-of-coefficentes" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Slope of Coefficentes</h3>
<p>Slope of coefficients for each single predictor, against the response (linear relationship between each model term and response).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;slope&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-258-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="residuals" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Residuals</h3>
<p>Slope of coefficients for each single predictor, against the residuals (linear relationship between each model term and residuals).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;resid&quot;</span>)</code></pre></div>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-259-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="diagnostics" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Diagnostics</h3>
<p>Check model assumptions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sjPlot<span class="op">::</span><span class="kw">plot_model</span>(fit_read_11re_s,
                   <span class="dt">type =</span> <span class="st">&quot;diag&quot;</span>)</code></pre></div>
<pre><code>[[1]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-260-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre><code>
[[2]]
[[2]]$school</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-260-2.png" width="576" style="display: block; margin: auto;" /></p>
<pre><code>

[[3]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-260-3.png" width="576" style="display: block; margin: auto;" /></p>
<pre><code>
[[4]]</code></pre>
<p><img src="eBook_multilevel_files/figure-html/unnamed-chunk-260-4.png" width="576" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="variance-explained.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"toc_depth": 3
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
